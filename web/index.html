<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ferris-8 - √âmulateur Chip-8</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header Compact -->
        <header class="header">
            <h1>ü¶Ä Ferris-8</h1>
            <p>√âmulateur Chip-8 moderne en Rust + WebAssembly</p>
        </header>

        <!-- Zone principale - Focus sur l'√©cran -->
        <main class="main-content">
            <!-- √âcran de l'√©mulateur - Element principal -->
            <div class="emulator-screen">
                <canvas id="display" width="640" height="320"></canvas>
                <div class="screen-info">
                    <span id="fps">FPS: --</span>
                    <span id="status">üî¥ Arr√™t√©</span>
                </div>
            </div>

            <!-- Contr√¥les -->
            <div class="controls">
                <div class="control-group">
                    <h3>üéÆ Contr√¥les</h3>
                    <button id="btn-start" class="btn btn-primary">‚ñ∂Ô∏è Start</button>
                    <button id="btn-stop" class="btn btn-secondary">‚èπÔ∏è Stop</button>
                    <button id="btn-reset" class="btn btn-warning">üîÑ Reset</button>
                </div>

                <div class="control-group">
                    <h3>üìÅ ROM</h3>
                    <input type="file" id="rom-input" accept=".ch8,.c8" />
                    
                    <div class="rom-section">
                        <h4>üß™ ROMs de Test</h4>
                        <div style="display: flex; gap: 5px; flex-wrap: wrap; margin: 10px 0;">
                            <button id="btn-rom-simple" class="btn btn-info btn-small">üî∏ Pixel fixe</button>
                            <button id="btn-rom-blink" class="btn btn-info btn-small">üí´ Clignotant</button>
                            <button id="btn-rom-test" class="btn btn-info btn-small">üèÉ Carr√© mobile</button>
                            <button id="btn-rom-demo" class="btn btn-info btn-small">üìù Affiche "BE"</button>
                        </div>
                    </div>

                    <div class="rom-section">
                        <h4>üéÆ ROMs Classiques</h4>
                        <div class="rom-selector">
                            <div class="custom-dropdown" id="rom-dropdown">
                                <div class="dropdown-header" id="dropdown-header">
                                    <span class="dropdown-text">-- Choisir une ROM --</span>
                                    <span class="dropdown-arrow">‚ñº</span>
                                </div>
                                <div class="dropdown-menu" id="dropdown-menu">
                                    <div class="dropdown-search">
                                        <input type="text" id="rom-search" placeholder="üîç Rechercher une ROM..." autocomplete="off">
                                    </div>
                                    <div class="dropdown-content" id="dropdown-content">
                                        <!-- Options will be populated by JS -->
                                    </div>
                                </div>
                            </div>
                            <button id="btn-load-selected-rom" class="btn btn-primary btn-small" disabled>Charger</button>
                        </div>
                        
                        <div id="rom-info" class="rom-info hidden">
                            <div class="rom-details">
                                <h5 id="rom-title"></h5>
                                <p id="rom-description"></p>
                                <small id="rom-meta"></small>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <h3>‚öôÔ∏è Param√®tres</h3>
                    <label>
                        Vitesse: <span id="speed-value">500</span> Hz
                        <input type="range" id="speed-slider" min="100" max="1000" value="500" />
                    </label>
                    <label>
                        <input type="checkbox" id="sound-enabled" checked />
                        Son activ√©
                    </label>
                </div>
            </div>
        </main>

        <!-- Sidebar - Debugger -->
        <aside class="sidebar">
            <div class="debugger">
                <h3>üîç Debugger</h3>
                
                <div class="debug-section">
                    <h4>üìã Registres</h4>
                    <div id="registers-info" class="monospace">
                        PC: 0x200 | I: 0x000 | SP: 0
                    </div>
                </div>

                <div class="debug-section">
                    <h4>‚å®Ô∏è Clavier Chip-8</h4>
                    <div class="chip8-keyboard">
                        <div class="key-row">
                            <button class="key" data-key="1">1</button>
                            <button class="key" data-key="2">2</button>
                            <button class="key" data-key="3">3</button>
                            <button class="key" data-key="C">C</button>
                        </div>
                        <div class="key-row">
                            <button class="key" data-key="4">4</button>
                            <button class="key" data-key="5">5</button>
                            <button class="key" data-key="6">6</button>
                            <button class="key" data-key="D">D</button>
                        </div>
                        <div class="key-row">
                            <button class="key" data-key="7">7</button>
                            <button class="key" data-key="8">8</button>
                            <button class="key" data-key="9">9</button>
                            <button class="key" data-key="E">E</button>
                        </div>
                        <div class="key-row">
                            <button class="key" data-key="A">A</button>
                            <button class="key" data-key="0">0</button>
                            <button class="key" data-key="B">B</button>
                            <button class="key" data-key="F">F</button>
                        </div>
                    </div>
                    <div class="keyboard-help">
                        <small>
                            Mapping: 1234/QWER/ASDF/ZXCV
                        </small>
                    </div>
                </div>

                <div class="debug-section">
                    <h4>üóÉÔ∏è M√©moire</h4>
                    <button id="btn-memory-dump" class="btn btn-small">Voir m√©moire</button>
                    <div id="memory-info" class="monospace small">
                        Cliquez pour voir le dump m√©moire
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Loading -->
    <div id="loading" class="loading">
        <div class="spinner"></div>
        <p>Chargement de Ferris-8...</p>
    </div>

    <!-- Scripts -->
    <script type="module" src="main.js"></script>
</body>
</html>